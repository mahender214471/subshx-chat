(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7086:function(e,l,s){Promise.resolve().then(s.bind(s,6801))},6801:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return p}});var n=s(7437),i=s(2265),t=s(4999),a=s(5435),o=s(5961),r=s(7979);let d=e=>{var l,s,i;let{data:t}=e;return(0,n.jsxs)("div",{className:"flex mb-4 cursor-pointer",children:[(0,n.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-2",children:(0,n.jsx)("img",{src:(null==t?void 0:null===(l=t.user)||void 0===l?void 0:l.image)?null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.image:"/images/placeholder.jpg",alt:null==t?void 0:null===(i=t.user)||void 0===i?void 0:i.name,className:"w-8 h-8 rounded-full"})}),(0,n.jsx)("div",{className:"flex max-w-96 bg-white rounded-lg p-3 gap-3",children:(0,n.jsx)("p",{className:"text-gray-700",children:null==t?void 0:t.message})})]})},c=e=>{var l,s,i;let{data:t}=e;return(0,n.jsxs)("div",{className:"flex justify-end mb-4 cursor-pointer",children:[(0,n.jsx)("div",{className:"flex max-w-96 bg-gradient-to-r from-fuchsia-500 to-pink-500 text-white rounded-lg p-3 gap-3",children:(0,n.jsx)("p",{children:null==t?void 0:t.message})}),(0,n.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center ml-2",children:(0,n.jsx)("img",{src:(null==t?void 0:null===(l=t.user)||void 0===l?void 0:l.image)?null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.image:"/images/placeholder.jpg",alt:null==t?void 0:null===(i=t.user)||void 0===i?void 0:i.name,className:"w-8 h-8 rounded-full"})})]})};function u(e){let{image:l,name:s,online:i,messages:t}=e;return(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("header",{className:"bg-gradient-to-r from-fuchsia-500 to-pink-500 p-4 text-white flex items-center",children:[(0,n.jsx)(o.K,{src:l,name:null==s?void 0:s.slice(0,2)}),(0,n.jsxs)("div",{className:"ml-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:s}),(0,n.jsx)("p",{className:"",children:i&&1==i?"Active":"Offline"})]})]}),(0,n.jsx)("div",{className:"h-screen overflow-y-auto p-4 pb-36",children:null==t?void 0:t.map((e,l)=>(null==e?void 0:e.type)==1?(0,n.jsx)(d,{data:e},l):(0,n.jsx)(c,{data:e},l))}),(0,n.jsx)("footer",{className:"bg-white border-t border-gray-300 p-4 absolute bottom-0 w-3/4",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r.Z,{placeholder:"Type a message"}),(0,n.jsx)("button",{className:"bg-gradient-to-r from-fuchsia-500 to-pink-500 text-white px-4 py-2 rounded-md ml-2",children:"Send"})]})})]})}var m=s(1444),x=s(6463);function v(){return(0,n.jsx)("div",{className:"w-full h-screen flex items-center justify-center bg-gradient-to-r from-fuchsia-500 to-pink-500",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("img",{className:"w-[500px] h-[500px] rounded-full",src:"/images/login2.gif",alt:"",loading:"lazzy"}),(0,n.jsx)("p",{className:"mt-6 text-base text-white font-[800px]",children:"Loading please wait..."})]})})}function f(e){let{name:l}=e;return(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("img",{className:"w-[300px] h-[300px] rounded-full",src:"/images/login2.gif",alt:"",loading:"lazzy"}),(0,n.jsxs)("p",{className:"mt-6 text-base  font-[800px]",children:["Welcome Mr. ",l]})]})})}var h=s(1777),g=s(357);function p(){var e,l,s;let o=(0,m.I0)(),r=(0,x.useRouter)(),d=(0,m.v9)(e=>null==e?void 0:e.AppState),{isAuthonicate:c,selectedRecever:p,loginUserDetails:j,messageList:N}=d,w=(0,t.ZP)(null==g?void 0:null===(e=g.env)||void 0===e?void 0:"http://localhost:4040",{extraHeaders:{authorization:null==d?void 0:d.token}});return console.log("connected ==============>",null==w?void 0:w.connected),w.on("connectListenerr",()=>{console.log("Connected to server")}),(0,i.useEffect)(()=>{w.on("connectListenerr",()=>{console.log("Connected to server")}),w.on("errorNotifyer",e=>{console.log("Failed to connet",e)}),w.emit("chats"),w.on("chats-list",e=>{o((0,h.P6)(e))}),w.on("get-message-listing-status",e=>{console.log("Messages ===============>",e),o((0,h.zf)(e))})},[]),(null==p?void 0:p.chatId)&&w.emit("get-message-listing",{chatId:null==p?void 0:p.chatId}),(0,i.useEffect)(()=>{c||r.push("/auth/login")},[]),c?(0,n.jsx)(a.default,{children:(null==p?void 0:p.chatId)?(0,n.jsx)(u,{name:null==p?void 0:null===(l=p.recever)||void 0===l?void 0:l.name,image:null==p?void 0:null===(s=p.recever)||void 0===s?void 0:s.image,messages:N}):(0,n.jsx)(f,{name:null==j?void 0:j.name})}):(0,n.jsx)(v,{})}}},function(e){e.O(0,[990,499,166,138,645,282,435,971,23,744],function(){return e(e.s=7086)}),_N_E=e.O()}]);